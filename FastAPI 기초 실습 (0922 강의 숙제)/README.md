# π›’ κ³ κ° λ° μƒν’ κ΄€λ¦¬ API

FastAPIλ¥Ό ν™μ©ν• κ³ κ° μ •λ³΄ λ° μƒν’ κ΄€λ¦¬ μ‹μ¤ν… (2024λ…„ 9μ›” 22μΌ κ°•μ μ™μ )

## π“‹ ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” FastAPIλ¥Ό μ‚¬μ©ν•μ—¬ κ³ κ° μ •λ³΄μ™€ μƒν’ μ •λ³΄λ¥Ό κ΄€λ¦¬ν•κ³  κ²€μƒ‰ν•  μ μλ” RESTful APIλ¥Ό μ κ³µν•©λ‹λ‹¤.
Query νλΌλ―Έν„°λ¥Ό ν™μ©ν• ν•„ν„°λ§ κΈ°λ¥κ³Ό Path νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν• λ™μ  λΌμ°ν…μ„ κµ¬ν„ν–μµλ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥

### 1. π“ μ „μ²΄ μ •λ³΄ μ΅°ν
- λ¨λ“  κ³ κ° μ •λ³΄μ™€ μƒν’ μ •λ³΄λ¥Ό ν• λ²μ— μ΅°ν
- μ΄ κ³ κ° μ λ° μƒν’ μ ν†µκ³„ μ κ³µ

### 2. π” κ³ κ° μ •λ³΄ κ²€μƒ‰ (`/customers`)
- **μ΄λ¦„ κ²€μƒ‰**: κ³ κ°λ…μΌλ΅ κ²€μƒ‰
- **μ—°λ Ή λ²”μ„ κ²€μƒ‰**: μµμ†/μµλ€ μ—°λ ΉμΌλ΅ ν•„ν„°λ§
- **μ£Όμ† κ²€μƒ‰**: μ£Όμ† ν‚¤μ›λ“λ΅ κ²€μƒ‰
- μ—¬λ¬ μ΅°κ±΄μ„ λ™μ‹μ— μ‚¬μ© κ°€λ¥ (AND μ΅°κ±΄)

### 3. π›οΈ μƒν’ μ •λ³΄ κ²€μƒ‰ (`/products`)
- **μƒν’λ… κ²€μƒ‰**: μƒν’λ…μΌλ΅ κ²€μƒ‰
- **κ°€κ²© λ²”μ„ κ²€μƒ‰**: μµμ†/μµλ€ κ°€κ²©μΌλ΅ ν•„ν„°λ§
- **μΉ΄ν…κ³ λ¦¬ κ²€μƒ‰**: μƒν’ μΉ΄ν…κ³ λ¦¬λ΅ ν•„ν„°λ§
- μ—¬λ¬ μ΅°κ±΄μ„ λ™μ‹μ— μ‚¬μ© κ°€λ¥ (AND μ΅°κ±΄)

### 4. π’° κ°€κ²© κ²¬μ  (homework_02.py)
- **λ‹¨μΌ μƒν’ κ²¬μ ** (`/quote/{product_id}`): νΉμ • μƒν’μ μ„ΈκΈ ν¬ν•¨ κ°€κ²© κ³„μ‚°
- **μ „μ²΄ μƒν’ κ²¬μ ** (`/quote`): λ¨λ“  μƒν’μ μ„ΈκΈ ν¬ν•¨ κ°€κ²© μ΅°ν
- μ„ΈκΈ 10% μλ™ κ³„μ‚°

### 5. π“ DataFrame λ°ν™
- **JSON ν•νƒ** (`/dataframe`): DataFrameμ„ JSON ν•μ‹μΌλ΅ λ°ν™
- **HTML ν•νƒ** (`/dataframe/html`): DataFrameμ„ HTML ν…μ΄λΈ”λ΅ λ°ν™

## π€ μ„¤μΉ λ° μ‹¤ν–‰

### 1. ν•„μ” ν¨ν‚¤μ§€ μ„¤μΉ

```bash
pip install fastapi uvicorn pandas
```

### 2. μ„λ²„ μ‹¤ν–‰

**homework_01.py μ‹¤ν–‰**:
```bash
uvicorn homework_01:app --reload
```

**homework_02.py μ‹¤ν–‰**:
```bash
uvicorn homework_02:app --reload
```

### 3. μ ‘μ†

μ„λ²„κ°€ μ‹¤ν–‰λλ©΄ λ‹¤μ μ£Όμ†μ—μ„ APIλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:
- **API λ¬Έμ„**: http://localhost:8000/docs
- **λ€μ²΄ λ¬Έμ„**: http://localhost:8000/redoc
- **API λ£¨νΈ**: http://localhost:8000

## π“¦ ν•„μ” ν¨ν‚¤μ§€

- `fastapi`: RESTful API ν”„λ μ„μ›ν¬
- `uvicorn`: ASGI μ„λ²„
- `pandas`: λ°μ΄ν„°ν”„λ μ„ μ²λ¦¬

## π“ API μ—”λ“ν¬μΈνΈ

### GET `/`
λ¨λ“  κ³ κ°κ³Ό μƒν’ μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤.

**μ‘λ‹µ μμ‹**:
```json
{
  "κ³ κ°_μ •λ³΄": {
    "1": {
      "μ„±λ…": "κΉ€μ² μ",
      "μ—°λ Ή": 35,
      "μ£Όμ†": "μ„μΈμ‹ κ°•λ‚¨κµ¬",
      "μ „ν™”λ²νΈ": "010-1234-5678"
    },
    ...
  },
  "μƒν’_μ •λ³΄": {
    "1": {
      "μƒν’λ…": "λ…ΈνΈλ¶",
      "κ°€κ²©": 1200000,
      "μ„¤λ…": "κ³ μ„±λ¥ κ²μ΄λ° λ…ΈνΈλ¶",
      "μΉ΄ν…κ³ λ¦¬": "μ „μμ ν’"
    },
    ...
  },
  "μ΄_κ³ κ°_μ": 5,
  "μ΄_μƒν’_μ": 5
}
```

### GET `/customers`
κ³ κ° μ •λ³΄λ¥Ό κ²€μƒ‰ν•©λ‹λ‹¤.

**Query νλΌλ―Έν„°**:
- `name` (Optional[str]): κ³ κ°λ…μΌλ΅ κ²€μƒ‰
- `age_min` (Optional[int]): μµμ† μ—°λ Ή
- `age_max` (Optional[int]): μµλ€ μ—°λ Ή
- `address` (Optional[str]): μ£Όμ†λ΅ κ²€μƒ‰

**μ‚¬μ© μμ‹**:
```
GET /customers?name=κΉ€&age_min=30&age_max=40
GET /customers?address=μ„μΈ
GET /customers?age_min=25&age_max=35
```

**μ‘λ‹µ μμ‹**:
```json
{
  "κ²€μƒ‰_κ²°κ³Ό": {
    "1": {
      "μ„±λ…": "κΉ€μ² μ",
      "μ—°λ Ή": 35,
      "μ£Όμ†": "μ„μΈμ‹ κ°•λ‚¨κµ¬",
      "μ „ν™”λ²νΈ": "010-1234-5678"
    }
  },
  "κ²€μƒ‰λ_κ³ κ°_μ": 1
}
```

### GET `/products`
μƒν’ μ •λ³΄λ¥Ό κ²€μƒ‰ν•©λ‹λ‹¤.

**Query νλΌλ―Έν„°**:
- `name` (Optional[str]): μƒν’λ…μΌλ΅ κ²€μƒ‰
- `price_min` (Optional[int]): μµμ† κ°€κ²©
- `price_max` (Optional[int]): μµλ€ κ°€κ²©
- `category` (Optional[str]): μΉ΄ν…κ³ λ¦¬λ΅ κ²€μƒ‰

**μ‚¬μ© μμ‹**:
```
GET /products?category=μ „μμ ν’
GET /products?price_min=100000&price_max=500000
GET /products?name=λ…ΈνΈλ¶
```

**μ‘λ‹µ μμ‹**:
```json
{
  "κ²€μƒ‰_κ²°κ³Ό": {
    "1": {
      "μƒν’λ…": "λ…ΈνΈλ¶",
      "κ°€κ²©": 1200000,
      "μ„¤λ…": "κ³ μ„±λ¥ κ²μ΄λ° λ…ΈνΈλ¶",
      "μΉ΄ν…κ³ λ¦¬": "μ „μμ ν’"
    }
  },
  "κ²€μƒ‰λ_μƒν’_μ": 1
}
```

### GET `/quote/{product_id}` (homework_02.pyλ§ ν•΄λ‹Ή)
νΉμ • μƒν’μ κ°€κ²© κ²¬μ μ„ μ΅°νν•©λ‹λ‹¤. μ„ΈκΈ 10%κ°€ ν¬ν•¨λ μµμΆ… κ°€κ²©μ„ κ³„μ‚°ν•©λ‹λ‹¤.

**Path νλΌλ―Έν„°**:
- `product_id` (int): μƒν’ ID

**μ‚¬μ© μμ‹**:
```
GET /quote/1
```

**μ‘λ‹µ μμ‹**:
```json
{
  "μƒν’_μ •λ³΄": {
    "μƒν’λ…": "λ…ΈνΈλ¶",
    "μ„¤λ…": "κ³ μ„±λ¥ κ²μ΄λ° λ…ΈνΈλ¶",
    "μΉ΄ν…κ³ λ¦¬": "μ „μμ ν’"
  },
  "κ°€κ²©_κ²¬μ ": {
    "κΈ°λ³Έ_κ°€κ²©": "1,200,000μ›",
    "μ„ΈκΈ_μ¨": "10%",
    "μ„ΈκΈ_κΈμ•΅": "120,000μ›",
    "μµμΆ…_κ°€κ²©": "1,320,000μ›"
  },
  "κ²¬μ _μ”μ•½": "λ…ΈνΈλ¶ - μµμΆ… κ°€κ²©: 1,320,000μ› (μ„ΈκΈ ν¬ν•¨)"
}
```

**μ¤λ¥ μ‘λ‹µ** (μƒν’μ΄ μ—†λ” κ²½μ°):
```json
{
  "detail": "μƒν’μ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤"
}
```

### GET `/quote` (homework_02.pyλ§ ν•΄λ‹Ή)
λ¨λ“  μƒν’μ κ°€κ²© κ²¬μ μ„ μ΅°νν•©λ‹λ‹¤.

**μ‘λ‹µ μμ‹**:
```json
{
  "μ „μ²΄_μƒν’_κ²¬μ ": {
    "1": {
      "μƒν’λ…": "λ…ΈνΈλ¶",
      "κΈ°λ³Έ_κ°€κ²©": "1,200,000μ›",
      "μ„ΈκΈ_κΈμ•΅": "120,000μ›",
      "μµμΆ…_κ°€κ²©": "1,320,000μ›"
    },
    ...
  },
  "μ„ΈκΈ_μ¨": "10%",
  "μ΄_μƒν’_μ": 5
}
```

### GET `/dataframe`
DataFrameμ„ JSON ν•νƒλ΅ λ°ν™ν•©λ‹λ‹¤.

**μ‘λ‹µ μμ‹**:
```json
{
  "dataframe": [
    {"a": 1, "b": 4},
    {"a": 2, "b": 5},
    {"a": 3, "b": 6}
  ],
  "columns": ["a", "b"],
  "shape": [3, 2]
}
```

### GET `/dataframe/html`
DataFrameμ„ HTML ν…μ΄λΈ”λ΅ λ°ν™ν•©λ‹λ‹¤.

λΈλΌμ°μ €μ—μ„ μ ‘μ†ν•λ©΄ μ¤νƒ€μΌμ΄ μ μ©λ HTML ν…μ΄λΈ”μ΄ ν‘μ‹λ©λ‹λ‹¤.

## π’΅ μ‚¬μ© μμ‹

### cURL μμ‹

**κ³ κ° κ²€μƒ‰**:
```bash
curl "http://localhost:8000/customers?name=κΉ€&age_min=30"
```

**μƒν’ κ²€μƒ‰**:
```bash
curl "http://localhost:8000/products?category=μ „μμ ν’&price_max=1000000"
```

**κ°€κ²© κ²¬μ ** (homework_02.py):
```bash
curl "http://localhost:8000/quote/1"
```

### Python μμ‹

```python
import requests

# κ³ κ° κ²€μƒ‰
response = requests.get(
    "http://localhost:8000/customers",
    params={"name": "κΉ€", "age_min": 30}
)
print(response.json())

# μƒν’ κ²€μƒ‰
response = requests.get(
    "http://localhost:8000/products",
    params={"category": "μ „μμ ν’", "price_max": 1000000}
)
print(response.json())

# κ°€κ²© κ²¬μ  (homework_02.py)
response = requests.get("http://localhost:8000/quote/1")
print(response.json())
```

## π“ λ°μ΄ν„° κµ¬μ΅°

### κ³ κ° μ •λ³΄
- `μ„±λ…`: κ³ κ° μ΄λ¦„
- `μ—°λ Ή`: κ³ κ° λ‚μ΄
- `μ£Όμ†`: κ³ κ° μ£Όμ†
- `μ „ν™”λ²νΈ`: κ³ κ° μ „ν™”λ²νΈ

### μƒν’ μ •λ³΄
- `μƒν’λ…`: μƒν’ μ΄λ¦„
- `κ°€κ²©`: μƒν’ κ°€κ²© (μ›)
- `μ„¤λ…`: μƒν’ μ„¤λ…
- `μΉ΄ν…κ³ λ¦¬`: μƒν’ μΉ΄ν…κ³ λ¦¬ (μ „μμ ν’, μλ¥, κ°€κµ¬, κ°€μ „μ ν’ λ“±)

## π› οΈ κΈ°μ  μ¤νƒ

- **Python 3.8+**
- **FastAPI**: κ³ μ„±λ¥ μ›Ή ν”„λ μ„μ›ν¬
- **Uvicorn**: ASGI μ„λ²„
- **Pandas**: λ°μ΄ν„°ν”„λ μ„ μ²λ¦¬

## π“ ν•™μµ λ‚΄μ©

μ΄ ν”„λ΅μ νΈλ¥Ό ν†µν•΄ λ‹¤μμ„ ν•™μµν•  μ μμµλ‹λ‹¤:

1. **Query νλΌλ―Έν„°**: URL μΏΌλ¦¬ μ¤νΈλ§μ„ ν†µν• ν•„ν„°λ§
2. **Path νλΌλ―Έν„°**: URL κ²½λ΅λ¥Ό ν†µν• λ™μ  λΌμ°ν…
3. **Optional νƒ€μ…**: μ„ νƒμ  νλΌλ―Έν„° μ²λ¦¬
4. **HTTPException**: μ—λ¬ μ²λ¦¬ λ° μƒνƒ μ½”λ“ κ΄€λ¦¬
5. **DataFrame λ°ν™**: JSON λ° HTML ν•νƒλ΅ λ°μ΄ν„° λ°ν™
6. **API λ¬Έμ„ν™”**: FastAPI μλ™ λ¬Έμ„ μƒμ„± κΈ°λ¥

## π“„ νμΌ κµ¬μ΅°

```
FastAPI κΈ°μ΄ μ‹¤μµ (0922 κ°•μ μ™μ )/
β”β”€β”€ homework_01.py    # κΈ°λ³Έ λ²„μ „ (κ²€μƒ‰ κΈ°λ¥)
β”β”€β”€ homework_02.py    # ν™•μ¥ λ²„μ „ (κ²€μƒ‰ + κ°€κ²© κ²¬μ )
β””β”€β”€ README.md        # ν”„λ΅μ νΈ λ¬Έμ„
```

## π”§ λ¬Έμ  ν•΄κ²°

### ν¬νΈκ°€ μ΄λ―Έ μ‚¬μ© μ¤‘μΈ κ²½μ°

λ‹¤λ¥Έ ν¬νΈλ΅ μ‹¤ν–‰:
```bash
uvicorn homework_01:app --reload --port 8001
```

### ν•κΈ€ μΈμ½”λ”© λ¬Έμ 

μ„λ²„ μ‹¤ν–‰ μ‹ μΈμ½”λ”©μ„ λ…μ‹:
```bash
set PYTHONIOENCODING=utf-8
uvicorn homework_01:app --reload
```

## π“„ λΌμ΄μ„ μ¤

This project is for educational purposes.

## π‘¤ μ‘μ„±μ

FastAPI κΈ°μ΄ μ‹¤μµ (2024λ…„ 9μ›” 22μΌ κ°•μ μ™μ )

---

**Made with β¤οΈ using FastAPI**

