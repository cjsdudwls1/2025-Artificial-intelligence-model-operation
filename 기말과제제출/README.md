# 실습실 시간표 자동 배정 시스템

유전 알고리즘 기반의 실습실 시간표 자동 배정 시스템으로, 공실을 최소화하고 충돌을 방지합니다.

## 주요 기능

- ✅ **시간표 자동 배정**: 유전 알고리즘으로 최적 시간표 생성 (공실 최소화)
- ✅ **강의 관리**: 강의 추가/삭제 시 전체 재배정
- ✅ **버전 관리**: 변경 이력 저장 및 롤백
- ✅ **공실 분석**: 강의실별 활용률 분석
- ✅ **웹 UI**: 캘린더 형식 시간표 시각화

## 기술 스택

- **Backend**: FastAPI, SQLAlchemy, SQLite
- **Frontend**: HTML5, CSS3, JavaScript
- **Algorithm**: 유전 알고리즘 (Genetic Algorithm)
- **Database**: SQLite

## 빠른 시작

### 설치

```bash
pip install -r requirements.txt
```

### 실행

```bash
# Windows
run_api.bat

# 또는 직접 실행
python -m uvicorn api:app --reload --host 127.0.0.1 --port 8000
```

브라우저에서 접속: **http://127.0.0.1:8000**

## 사용 방법

### 1. 시간표 배정
1. CSV 파일 업로드 (`courses_data.csv` 형식)
2. "배정 실행" 클릭
3. 결과 확인 (강의실별 캘린더 형식)

### 2. 강의 추가/삭제
- **추가**: 강의 정보 입력 후 "추가 및 재배정"
- **삭제**: 목록에서 선택 후 "삭제 및 재배정"
- 자동으로 전체 시간표 재최적화

### 3. 버전 관리
- 모든 변경 이력 자동 저장
- 이전 버전 조회 및 복원 가능

## 알고리즘 특징

- **유전 알고리즘**: 개체군 기반 최적화로 전역 최적해 탐색
- **공실 최소화**: 다층적 페널티 시스템으로 공실 최소화
- **시간대 분산**: 모든 시간대(09:00-18:00) 균등 활용
- **충돌 방지**: 교수/강의실 중복 자동 방지
- **3시간 블록**: 모든 강의는 3시간 연속 블록으로 배정

## 제약 조건

- **강의실**: 1215, 1216, 1217, 1418 (우선), RENTAL_1 (필요시)
- **시간대**: 월~금, 09:00~18:00
- **블록**: 3시간 연속 (예: 09:00~12:00)
- **충돌 금지**: 동일 시간 동일 교수/강의실 중복 금지

## 프로젝트 구조

```
기말과제제출/
├── api.py                    # FastAPI 백엔드
├── models.py                 # 데이터베이스 모델
├── scheduler.py              # 유전 알고리즘 배정
├── vacancy_analyzer.py       # 공실 분석
├── requirements.txt
├── run_api.bat
└── static/                   # 프론트엔드
    ├── index.html
    ├── style.css
    └── script.js
```

## API 엔드포인트

- `POST /api/schedule/build` - CSV로 시간표 생성
- `GET /api/schedule` - 현재 시간표 조회
- `POST /api/courses/add` - 강의 추가 및 재배정
- `DELETE /api/courses/{id}` - 강의 삭제 및 재배정
- `GET /api/versions` - 버전 이력 조회
- `POST /api/versions/{id}/restore` - 버전 복원
- `GET /api/vacancy` - 공실 분석

자세한 API 문서: http://127.0.0.1:8000/docs

## 주요 개선 사항

- ✅ 공실 페널티 강화 (3배 증가)
- ✅ 강의실-요일별 공실 집중도 페널티 추가
- ✅ 공실 기반 적응형 교차 연산
- ✅ 3시간 블록 공실 보너스 시스템
- ✅ 모든 시간대 균등 활용 (7개 시간대 모두 사용)

## 라이선스

본 프로젝트는 기말과제용으로 개발되었습니다.
